
language: ruby

rvm:
  - 2.3.1

branches:
  only:
    - source

before_install:
  - cp config.json.sample config.json
  - sed -ri "s@GITHUB_REPOS_URL@$GITHUB_REPOS@" config.json
  # - sed -ri "s/GITHUB_NAME/$GITHUB_NAME/" _config.json
  # - sed -ri "s/GITHUB_EMAIL/$GITHUB_EMAIL/" _config.json
  # we use '@' for sed because '/' are used in var GITHUB_REPOS.

install:
  - bundle install

script: bundle exec rake site:deploy --quiet

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  on:
    branch: master

env:
  global:
    secure: "byyeRfOqYjlgkU7PE6QBWqoJVNZP5K+SF28gDQ9ALBHpCaWLZtmPeIZ28GwR6vKKfJlZXZm9W2sCEIf7X0sBQN7fB2nmnegISFQm5/kXS46G3cWJOTr3h/lWS0x9KDQPA5z9IYYJu4i3jCVWNRnGjekTVD3SLYgKcn43V+4u8R5KdYsUbRph7uEtUhrvCWfNMNM42QeL/dL2MUbnyqOV+2cHIiU2sS4uD3oJEtXltDKgdWrek9C9AR1D7z6SuYGPdH46HhjqFTyxKcrpncRSSWydvq7P17+g8ZDTgzRzRRExPbUOWqryTIIBK2KiqZUTgoyYJTzjqN3IZg7uuOxcWNnRP/LspGorRZTSbQXLhveMTO3aPKEUen50KlRplbCc+cceDiS8fVFa6U/5s4bKHoWAm0WRwQEmnj3nnCkxnJdAoFZZhzvK1Vn9n/OfHI50f1khKfaJXp8SyovglHUvja/o7Dy4suy/US+W3U8g60fObLqTDieWSsY/vEC3juqx6l7GzGwCymFo00QgDGpeunu3JfIfm/x5MgHKe/LaP4c6pOWhUO3mssSjih8/zQGsqQDPhCc9ZEhh4Dk2A/LFt1Ao27OdJZwIkLpDoerm1MZoFGpUB1al8p1ClVM7AeERGJYFpu0QbIgtZv1xyL7joUORs3hCmAy5gfQ44kLCvos="
